@use "variables" as *;

// 歷史清單, table of contents
// ---------------------------------------------------------------- //
.toc{
  z-index: 199;
  position: fixed; left: 10px; right: 10px;bottom: 0;
  max-height: calc(100vh - 70px);
  overflow-y: auto;

  margin: 0; padding:8px 0;
  background-color: $white;
  border-radius: $radius $radius 0 0;
  box-shadow: $shadow2 0 0 16px 2px;



  .tray{
    display: none;
  }

  // 標頭
  .toc_head {
    display: none;
    line-height: 1;
    font-weight: bold; font-size: 1.125em;
    padding: 1.5em 16px .5em;margin: 0; 
    border-bottom: 1px solid $borderColor;
  }
  
  // 控制開合的按鈕
  button.handle{
    --tinge : #{$fontColor};
    
    position: relative;
    width: calc(100% - 16px);
    height: 3em;
    margin: 0 8px 4px; padding-left: 8px; padding-right: 40px;
    font-weight: bold;
    border: none;
    text-align: left;
    color: var(--tinge);
    background-color: $grayLight;
    border-radius: 4px;
    &::after {
      content: '';
      position: absolute; right: 20px; top: 1.3em;
      width: 4px; height: 4px; border-radius: 2px;
      background-color: var(--tinge);
      box-shadow: var(--tinge) -7px 0 0, var(--tinge) 7px 0 0;

      transition: .2s;
    }
    &:hover, &:focus {
      --tinge : #{$white};
      background-color: $grayDim;
    }

    &.closeIt {
      &::after {
        box-shadow: none;
        width: 14px; right: 13px;
      }
    }
  }

  ul{list-style: none; margin: 0;padding: 0;}
  ul.toc_list{
    line-height: 1.5;
    li{
      a { 
        position: relative;
        display: block; text-decoration: none;
        padding: 13px 16px 11px;
        transition: .2s;
        &:hover{
          background-color: $primaryColor;
          color: $white;
          &::after{border-color: $white;}
          &::before {background-color: $white;}
        }
        &:has(+ul) {
          padding-right: 40px;
          &::after {
            content: ''; position: absolute;
            right: 15px; top: 16px;
            width: 10px; height: 10px;
            border: 2px solid $borderColorDark;
            border-left: none; border-top: none;
            rotate: 45deg;
            transition: .2s;
          }
        }

        &.closeIt{
          &::after {
            rotate: 225deg; top: 22px;
          }
        }
      }
    }

    &>li{ 
      // border-bottom: $borderColor solid 1px;
      &:has(>a.closeIt) {
        transition: .2s;
        background-color: rgb(0 0 0 / .05);
        box-shadow: $shadow1 0 0 8px inset;
      }
      ul {display: none;}
    }

    &>li>ul>li{
      a{
        &::before {
          content: ''; position: absolute;
          top: 21px;
          width: 5px; height: 5px;
          background: $grayDark;
        }
      }
      &>a{ 
        padding-left: 36px;
        &::before {left: 22px; }
      }
      &>ul>li{
        &>a{ padding-left: 56px;
          &::before {left: 42px; }
        }
        &>ul>li{
          &>a{ padding-left: 76px;
          &::before {left: 62px; }
          }
        }
      }
    }
  }

  @media screen and (min-width: $wwNormal){

    border-radius: $radius;
    max-height:none;
    box-shadow: none;
    background-color: $grayPale;

    .toc_head {
      display: block;
    }
    button.handle{display: none;}

    .tray {
      display: block;
    }

  }




}
// ---------------------------------------------------------------- //
